<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
    xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
>
 
<channel>
    <title>Bruno P. Kinoshita</title>
    <atom:link href="/blog/feed.xml" rel="self" type="application/rss+xml" />
    <link>/</link>
    <description></description>
    <lastBuildDate>1500631516.2356448</lastBuildDate>
    <language>en-US</language>
    <generator>PieCrust 2.1.1</generator>
 

<item>
    <title>Apache Commons Lang: Memoizer</title>
    <pubDate>Jan 08, 2017</pubDate>
    <link>/2017/01/08/apache-commons-lang-memoizer</link>
    <dc:creator></dc:creator>
    <description><p>The current release of <a href="https://commons.apache.org/proper/commons-lang/">Apache Commons Lang</a>
is <strong>3.5</strong>. The upcoming release, probably 3.6,
will include a new feature, added in a
<a href="https://github.com/apache/commons-lang/pull/203">pull request</a>:
<strong>a Memoizer implementation</strong>. Check out the ticket <a href="https://issues.apache.org/jira/browse/LANG-740">LANG-740</a>
for more about the implementation being added to [lang].</p>
<p>The book <a href="http://jcip.net/">Java Concurrency in Practice</a> introduces readers to the Memoizer,
and has also a <a href="http://jcip.net/listings/Memoizer.java">public domain implementation available for download</a>
(besides that, the book has also lots of other interesting topics!).</p>
<p>In summary, Memoizer is a simple cache, that will store the result of
a computation. It receives a Computable object, responsible for doing something
that will be stored by the Memoizer. Here&#8217;s a simple code to illustrate how that
will work in your Java code.</p>
<div class="highlight"><pre><span class="c1">// Computation to be stored in the cache</span>
<span class="n">Computable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">getFormattedCurrentDate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Computable</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">compute</span><span class="o">(</span><span class="n">String</span> <span class="n">fmt</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">InterruptedException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="n">fmt</span><span class="o">).</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">};</span>

<span class="c1">// Our memoizer</span>
<span class="n">Memoizer</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">dateCache</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Memoizer</span><span class="o">&lt;&gt;(</span><span class="n">getFormattedCurrentDate</span><span class="o">);</span>

<span class="c1">// To illustrate its use</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="c1">// S -&gt; Millisecond</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">dateCache</span><span class="o">.</span><span class="na">compute</span><span class="o">(</span><span class="s">&quot;HH:mm:ss:S Z dd/MM/YYYY&quot;</span><span class="o">));</span>
        <span class="c1">// Regardless of this sleep call, we get the same result every iteration</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1500</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>The computable created (<em>getFormattedCurrentDate</em>) will be called only once, and stored in
a map. The parameter passed in the <em>#compute()</em> method will be used as key in the map.
So choose your parameter wisely :-) The output of the example will be similar to the following one.</p>
<div class="highlight"><pre>19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
19:15:57:854 +1300 08/01/2017
</pre></div>

<p>In the example above I used a <em>for-loop</em> to illustrate what will happen. Even though we call
the memoizer <em>#compute()</em> method several times, followed by
<em>Thread#sleep()</em>; only one result, the first to be computed, will be returned.</p>
<p>So that&#8217;s all for today. Hope you learned something about this new class, that must
be available in the next release of Apache Commons Lang.</p>
<p>Happy hacking!</p>
<p>ps: [lang] uses Java 7, so that is why we do not have a functional instead of the Comparable</p></description>
</item>

<item>
    <title>Apache Commons Text</title>
    <pubDate>Jan 07, 2017</pubDate>
    <link>/2017/01/07/apache-commons-text</link>
    <dc:creator></dc:creator>
    <description><p>There is a new component in Apache Commons: Apache Commons Text. The 1.0 release might be announced
in the next weeks. The current site is still in the <a href="http://commons.apache.org/sandbox/commons-text/">Commons Sandbox</a>,
but it will change with the 1.0 release. The promotion from the sandbox
<a href="http://markmail.org/message/dm7xwv5wc6z7wme3">happened a few days ago</a> in
the project mailing list.</p>
<p>Here&#8217;s the project description: <strong>Apache Commons Text is a library focused on algorithms working on strings</strong>.</p>
<p>There was <a href="http://markmail.org/message/3k7m2zrzboji333r">a thread on the mailing list</a>
some time ago (Oct/2014) when we first discussed the component idea. Since then
many people contributed porting code from
<a href="http://commons.apache.org/proper/commons-lang/">Apache Commons Lang</a>,
<a href="http://lucene.apache.org/">Apache Lucene</a>, donating code from existing projects, and with new ideas.</p>
<p><strong>It is important to be aware that certain parts of Apache Commons Lang are
being marked as deprecated, and will be removed in the future, after Apache Commons Text
1.0 is out</strong>. For example: <a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/StringUtils.html">StringUtils</a>,
and <a href="https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/RandomStringUtils.html">RandomStringUtils</a>.</p>
<p>That will happen probably in a 4.x release of Apache Commons Lang, if everything
goes well with Apache Commons Text :-)</p>
<p>And there are already future features in
<a href="https://github.com/apache/commons-text/branches/all">branches too</a>.
It was decided that these features
needed further work, so they will probably be included in next releases.</p>
<p>So that&#8217;s a little bit of background on the new component that will be released soon.
If you have code using Apache Commons Lang, you might be interested in staying
tuned to release announcements in the mailing list!</p>
<p>And should you have suggestions and would like to contribute, feel free to join and start
a thread in the <a href="https://commons.apache.org/mail-lists.html">mailing list</a>,
open a <a href="https://issues.apache.org/jira/browse/TEXT">JIRA issue</a>, or submit a
<a href="https://github.com/apache/commons-text/pulls">pull request</a>.</p>
<p>Happy hacking!</p></description>
</item>

<item>
    <title>Plotting Auckland with OSMnx</title>
    <pubDate>Jan 05, 2017</pubDate>
    <link>/2017/01/05/plotting-auckland-with-osmnx</link>
    <dc:creator></dc:creator>
    <description><div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/05/plotting-auckland-with-osmnx/figure_1.png" rel="prettyPhoto" class="thumbnail" title="Auckland">
<img style="height: 400px;" class="ui image" src="/2017/01/05/plotting-auckland-with-osmnx/figure_1.png" alt="Auckland" />
</a>
<figcaption>Auckland</figcaption>
</figure>
</div>
</div>

<p>A couple of days ago I saw <a href="https://www.reddit.com/r/gis/comments/5lnjxs/creating_squaremile_figureground_diagrams_of/">a thread in reddit</a>
about OSMnx. It is a utilty for interacting with the OpenStreeMap (OSM)
API, manipulate it in pure Python and using libraries like NetworkX (a Python graph package).</p>
<p>With it you can do things like <q>visualize cul-de-sacs or one-way streets, plot shortest-path routes, or calculate stats like intersection density, average node connectivity, or betweenness centrality</q>. Or simply
plot the OSM data as in the graph above.</p>
<p>The source code is hosted at GitHub: <a href="https://github.com/gboeing/osmnx">https://github.com/gboeing/osmnx</a>.</p>
<blockquote cite="https://github.com/gboeing/osmnx">OSMnx is a Python 2+3 package that lets you download spatial geometries and construct, project, visualize, and analyze street networks from OpenStreetMap&#8217;s APIs. Users can download and construct walkable, drivable, or bikable urban networks with a single line of Python code, and then easily analyze and visualize them.</blockquote>

<p>The only issue I found while creating the map for Auckland using the example from the project
README, was that the script would exit with the following error: <strong>&#8220;ValueError: Geometry must be a shapely Polygon or MultiPolygon&#8221;</strong>.</p>
<p>After looking at the list of dependencies and finding that everything seemed to be OK,
I started looking at the project issues. And thankfully someone else had found the
<a href="https://github.com/gboeing/osmnx/issues/16">same issue</a>
and the maintainer of the project answered how to fix it.</p>
<p>The issue was that the OSM API returns two <a href="https://nominatim.openstreetmap.org/search?format=json&amp;limit=10&amp;dedupe=0&amp;polygon_geojson=1&amp;q=Auckland,%20New%20Zealand">entries for Auckland</a>
, where the first one is a Point, and the
second is the one that we want (a Polygon). The application defaults to using the first element,
so in order to change it you have to give a <em>which_result</em> argument.</p>
<div class="highlight"><pre><span class="c">#!/usr/bin/env python3</span>

<span class="kn">import</span> <span class="nn">osmnx</span> <span class="kn">as</span> <span class="nn">ox</span>
<span class="n">G</span> <span class="o">=</span> <span class="n">ox</span><span class="o">.</span><span class="n">graph_from_place</span><span class="p">(</span><span class="s">&#39;Auckland, NZ&#39;</span><span class="p">,</span> <span class="n">network_type</span><span class="o">=</span><span class="s">&#39;drive&#39;</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ox</span><span class="o">.</span><span class="n">plot_graph</span><span class="p">(</span><span class="n">ox</span><span class="o">.</span><span class="n">project_graph</span><span class="p">(</span><span class="n">G</span><span class="p">))</span>
</pre></div>

<p>And after that, and after waiting a few minutes, you should get your map :-)</p>
<p>Happy hacking!</p></description>
</item>

<item>
    <title>Drawing Terra Celta vocal Elcio</title>
    <pubDate>Jan 04, 2017</pubDate>
    <link>/2017/01/04/drawing-terra-celta-vocal-elcio</link>
    <dc:creator></dc:creator>
    <description><p><a href="http://www.terracelta.com.br/">Terra Celta band</a>&#8216;s vocal, Elcio.</p>
<p>Brazil is not only Samba, there is (good) celtic music in there too :-)</p>
<blockquote cite="https://en.wikipedia.org/wiki/Terra_Celta">Terra Celta (&#8220;Celtic Land&#8221;) is a Brazilian Celtic comedy rock band formed in 2005, and based in Londrina, Paran&aacute;. They are noted for making Celtic rock in Portuguese language (initially English), with often humorous lyrics. The group performs live with traditional Celtic/Irish clothing. Besides performing Irish music, the members also research the subject, by attending Celtic music festivals in Europe.</blockquote>

<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2017/01/04/drawing-terra-celta-vocal-elcio/terra-celta-elcio.png" rel="prettyPhoto" class="thumbnail" title="Terra Celta vocal Elcio">
<img style="height: 400px;" class="ui image" src="/2017/01/04/drawing-terra-celta-vocal-elcio/terra-celta-elcio.png" alt="Terra Celta vocal Elcio" />
</a>
<figcaption>Terra Celta vocal Elcio</figcaption>
</figure>
</div>
</div>

<p><a href="http://kinow.deviantart.com/art/Terra-Celta-s-vocal-Elcio-655240481">http://kinow.deviantart.com/art/Terra-Celta-s-vocal-Elcio-655240481</a></p>
<iframe id="player" type="text/html" width="640" height="390"
  src="http://www.youtube.com/embed/EOMEAzUBftA?enablejsapi=1&origin=http://kinoshita.eti.br"
  frameborder="0"></iframe></description>
</item>

<item>
    <title>Contributing to Krita</title>
    <pubDate>Jan 03, 2017</pubDate>
    <link>/2017/01/03/contributing-to-krita</link>
    <dc:creator></dc:creator>
    <description><p>As I mentioned in the <a href="/2017/01/02/debugging-an-application-that-freezes-the-x-server">last post</a>, I have been learning Qt and using C and C++ again.
Since I used C and C++ more during university (about 10 years ago, phew), decided
to read real code.</p>
<p>I used Photoshop, Illustrator, and Fireworks a lot when I was younger and had more
time to spend drawing. But some time ago I switched to Inkscape for vector graphics,
which I use at work for presentations. So it was only natural to try Krita now.</p>
<p>Since I was going to try Krita, I thought why not check out and build from source, and then
in case I found any bugs, contribute back? Or maybe from time to time triage issues,
find low hanging ones, and send a patch?</p>
<p>Well, turns out the Krita project has a great community, and it is super easy to send
contributions. So far I submitted three patches, some were included in 3.x releases.</p>
<ul>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=366741">https://bugs.kde.org/show_bug.cgi?id=366741</a></li>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=364208">https://bugs.kde.org/show_bug.cgi?id=364208</a></li>
<li><a href="https://bugs.kde.org/show_bug.cgi?id=374451">https://bugs.kde.org/show_bug.cgi?id=374451</a></li>
</ul>
<p>While the patches are rather small, they are suggestions on how to fix memory
segmentation faults, or strange behaviours in the interface. For these issues,
I had to learn more about Qt components, signals and emitting events, and,
of course, work with pointers, arrays, Qt data structures, etc. In other words,
lots of (geek) fun!</p>
<p>In other words, by contributing to Krita, I am not only helping the project
and giving a little back to the community, but also refreshing my memory on
C and C++, and slowly learning Qt - which is not very hard if you worked with
Swing/AWT, Delphi, Visual Basic, Gtk, etc.</p>
<p>What are you waiting to contribute to Krita? The developers that maintain the
project answer tickets and questions posted to <a href="https://reddit.com/r/krita">reddit</a>
in a good time, and are extremely easy to work with.</p>
<p>Read more <a href="http://www.davidrevoy.com/article193/guide-building-krita-on-linux-for-cats">here</a> how to build from source, and
<a href="https://krita.org/en/get-involved/developers/">here</a> on how to submit patches.</p>
<p>Happy hacking!</p></description>
</item>

<item>
    <title>Debugging an application that freezes the X server</title>
    <pubDate>Jan 02, 2017</pubDate>
    <link>/2017/01/02/debugging-an-application-that-freezes-the-x-server</link>
    <dc:creator></dc:creator>
    <description><p>Some time ago, I decided to start writing C++ again, and picked Krita for that.
Krita is written in C++ and Qt. The <a href="https://bugs.kde.org/show_bug.cgi?id=366741">bug I was working on</a>
involved a memory issue when changing the UI.</p>
<p>The problem was that this UI change would result in, not only Krita, but the whole
X server freezing. My set up was basically Ubuntu 16.04.1 LTS, with Eclipse, Qt5,
and the latest version of Krita checked out via git.</p>
<p>Initially I spent some time looking at the logs, tracing the binary, even downloaded
some Qt utility tools to look at the events and what was happening with the application
when it froze.</p>
<p>However, eventually I realized I was going to spend more time on this part of the
issue, rather than on the memory bug. So decided to look for a work-around.</p>
<p>Thankfully someone else blogged about a similar issue and saved me a lot of time :-)
Here&#8217;s how I did it, following the instructions in
<a href="http://www.geany.org/manual/gtk/gtk-faq/x462.html">this blog post</a>.</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo apt-get install xnest -y
<span class="nv">$ </span><span class="nb">cd </span>krita_install/
<span class="nv">$ </span>Xnest :10
<span class="nv">$ </span>twm -display :10
<span class="nv">$ </span><span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span>:10
<span class="nv">$ </span>./krita
</pre></div>

<p>That&#8217;s it. You should have Krita running in a separate window, with Xnest, and within
this window the twm window manager running. So when it freezes, at least you can still
debug your application in Eclipse or whatever IDE you prefer.</p>
<p>Happy hacking!</p></description>
</item>

<item>
    <title>Drawing sketch: Uh!</title>
    <pubDate>Dec 19, 2016</pubDate>
    <link>/2016/12/19/drawing-sketch-uh</link>
    <dc:creator></dc:creator>
    <description><p>Sketch.</p>
<div class='row'>
<div class="ui container" style='text-align: center;'>
<figure>
<a href="/2016/12/19/drawing-sketch-uh/progress.jpg" rel="prettyPhoto" class="thumbnail" title="Uh! progress">
<img class="ui fluid image" src="/2016/12/19/drawing-sketch-uh/progress.jpg" alt="Uh! progress" />
</a>
<figcaption>Uh! progress</figcaption>
</figure>
</div>
</div>

<p>And final work here.</p>
<div class='row'>
<div class="ui fluid container">
<figure>
<a  href="/2016/12/19/drawing-sketch-uh/uh.jpg" rel="prettyPhoto" class="thumbnail" title="Uh!">
<img style="height: 400px;" class="ui image" src="/2016/12/19/drawing-sketch-uh/uh.jpg" alt="Uh!" />
</a>
<figcaption>Uh!</figcaption>
</figure>
</div>
</div>

<p>For <a href="http://kinow.deviantart.com/art/Uh-651490865">redditgetsdrawn</a></p></description>
</item>

<item>
    <title>PermGen errors and java.lang.ClassCastException: com.sun.crypto.provider.AESCipher cannot be cast to javax.crypto.CipherSpi running Jenkins plug-in tests with PowerMock</title>
    <pubDate>Dec 19, 2016</pubDate>
    <link>/2016/12/19/permgen-errors-and-java-lang-classcastexception-com-sun-crypto-provider-aescipher-cannot-be-cast-to-javax-crypto-cipherspi-running-jenkins-plug-in-tests-with-powermock</link>
    <dc:creator></dc:creator>
    <description><p>Recently while working on a Jenkins plugin some tests were failing with PermGen errors.
Even though it worked in my notebook at home (with Java 8, thus no Permgen), it failed
in a CloudBees hosted Jenkins job, and also on my Mac (with Java 7) at work.</p>
<p>As I could not change the settings in the CloudBees hosted Jenkins, I decided to spent some
time investigating why these tests would require so much memory. Then I found
<a href="https://angus.nyc/2015/fixing-common-powermock-problems/">this blog post about PowerMock</a>.</p>
<p>I was not using the <em>@PrepareForTest</em> annotation, but after adding it the issue was gone. So I
assume it either prevents PowerMock from trying to dynamically load several classes, or instructs
it to unload classes after the tests. But in anyway after adding it the issue was gone.</p>
<p>Then I got the following exception.</p>
<div class="highlight"><pre>WARNING: Failed to instantiate Key<span class="o">[</span><span class="nb">type</span><span class="o">=</span>hudson.security.csrf.DefaultCrumbIssuer<span class="nv">$DescriptorImpl</span>, <span class="nv">annotation</span><span class="o">=[</span>none<span class="o">]]</span><span class="p">;</span> skipping this component
com.google.inject.ProvisionException: Guice provision errors:

1<span class="o">)</span> Error injecting constructor, java.lang.ClassCastException: com.sun.crypto.provider.AESCipher cannot be cast to javax.crypto.CipherSpi
  at hudson.security.csrf.DefaultCrumbIssuer<span class="nv">$DescriptorImpl</span>.&lt;init&gt;<span class="o">(</span>DefaultCrumbIssuer.java:127<span class="o">)</span>

<span class="m">1</span> error
    at com.google.inject.internal.ProviderToInternalFactoryAdapter.get<span class="o">(</span>ProviderToInternalFactoryAdapter.java:52<span class="o">)</span>
</pre></div>

<p>And then thanks to <a href="https://github.com/powermock/powermock/issues/294">this issue</a> I understood
that PowerMock was mocking <em>javax.crypto</em> classes. Turns out it is quite easy to tell
PowerMock to ignore certain classes from being mocked, with the <em>@PowerMockIgnore</em> annotation.</p>
<div class="highlight"><pre><span class="c1">// snip</span>
<span class="nd">@RunWith</span><span class="o">(</span><span class="n">PowerMockRunner</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@PowerMockIgnore</span><span class="o">({</span><span class="s">&quot;javax.crypto.*&quot;</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestAbstractUnoChoiceParameter</span> <span class="o">{</span>
<span class="c1">//</span>
<span class="o">}</span>
<span class="c1">// snip</span>
</pre></div>

<p>Added a couple of notes to this <a href="https://wiki.jenkins-ci.org/display/JENKINS/Mocking+in+Unit+Tests">Jenkins Wiki page</a>
so that users facing similar issues can try these possible workarounds.</p>
<p>Hope that helps someone!</p></description>
</item>

<item>
    <title>Using Requests Session Objects for web scraping</title>
    <pubDate>Nov 25, 2016</pubDate>
    <link>/2016/11/25/using-requests-session-objects-for-web-scraping</link>
    <dc:creator></dc:creator>
    <description><p>I had to write a Python script some months ago, that would retrieve Solar energy
data from a web site. It was basically a handful of HTTP calls, parse the response
that was mainly in JSON, and store the results as JSON and CSV for processing later.</p>
<p>Since it was such a small task, I used the <a href="http://docs.python-requests.org">Requests</a>
module instead of a complete web scraper. The HTTP requests had to be made with a
time out, and also pass certain headers. I started customizing each call, until
I learned about the Requests <a href="http://docs.python-requests.org/en/master/user/advanced/">Session Objects</a>.</p>
<p>You create a session, as in ORM/JPA, where you can define a context, with certain properties
and control an orthogonal behavior.</p>
<div class="highlight"><pre><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility method to HTTP GET a URL&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="k">def</span> <span class="nf">post</span><span class="p">(</span><span class="n">session</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Utility method to HTTP POST a URL with data parameters&quot;&quot;&quot;</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="n">requests</span><span class="o">.</span><span class="n">codes</span><span class="o">.</span><span class="n">ok</span><span class="p">:</span>
        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">response</span>

<span class="k">with</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span> <span class="k">as</span> <span class="n">s</span><span class="p">:</span>
    <span class="c"># x-test header will be sent with every request</span>
    <span class="n">s</span><span class="o">.</span><span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s">&#39;x-test&#39;</span><span class="p">:</span> <span class="s">&#39;true&#39;</span><span class="p">})</span>

    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span> <span class="s">&#39;rememberne&#39;</span><span class="p">:</span> <span class="s">&#39;false&#39;</span><span class="p">}</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">post</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&#39;https://portal.login.url&#39;</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

    <span class="n">r</span> <span class="o">=</span> <span class="n">get</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="s">&#39;https://portal.home.url&#39;</span><span class="p">)</span>
</pre></div>

<p>Besides the session object, that gives you ability to add headers to all requests,
you won&#8217;t have to worry about redirects. The library by default takes care
<a href="https://github.com/kennethreitz/requests/blob/dfad00a6e84bc75b12468ca29ccf4f971c813fc8/requests/sessions.py#L110">of that</a>
with a <a href="https://github.com/kennethreitz/requests/blob/dfad00a6e84bc75b12468ca29ccf4f971c813fc8/requests/models.py#L54">default limit of up to 30</a>.</p>
<p>Happy hacking!</p></description>
</item>

<item>
    <title>Changing Spring Boot environment variables in the command line</title>
    <pubDate>Nov 21, 2016</pubDate>
    <link>/2016/11/21/changing-spring-boot-environment-variables-in-the-command-line-</link>
    <dc:creator></dc:creator>
    <description><p>This week while helping developers and testers to experiment with a backend application,
some of them found useful to learn a simple trick to change Spring Boot properties
when you can run the application locally (our testers build, compile, change the code, how cool
is that?).</p>
<p>Here&#8217;s how it works. Say you have the following settings in your application&#8217;s
<strong>application.properties</strong>:</p>
<div class="highlight"><pre>my.application.database.username<span class="o">=</span>sa
my.application.database.password<span class="o">=</span>notasimplepassword
</pre></div>

<p>And that you want to change these parameters in order to, for instance, create an application
error, so that you can code and test what happens to the frontend application in that situation.</p>
<p>You replace <em>dots</em> by <em>underscores</em>, and put all your words in upper case. So the variables
above would be: MY_APPLICATION_DATABASE_USERNAME and MY_APPLICATION_DATABASE_PASSWORD.</p>
<p>Furthermore, you do not need to edit your application.properties file, if you are on Linux or
Mac OS. You can start the application and override environment variables at the same time
with the following syntax.</p>
<div class="highlight"><pre><span class="nv">$ MY_APPLICATION_DATABASE_USERNAME</span><span class="o">=</span>olivei <span class="nv">MY_APPLICATION_DATABASE_PASSWORD</span><span class="o">=</span>7655432222a mvn clean spring-boot:run
</pre></div>

<p>This way your application will start with the new values.</p>
<p>Happy hacking!</p>
<p><strong>&#8212;EDIT&#8212;</strong></p>
<p>As pointed by Stéphane Nicoll (thanks!), you could change the property values
without having to use the upper case syntax.</p>
<div class="highlight"><pre>mvn -Dmy.application.database.username<span class="o">=</span>anotheruser clean spring-boot:run
</pre></div>

<p>And he even included a link to <a href="http://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config">docs</a>! ♥ the Internet and Open Source!</p>
<blockquote class="twitter-tweet" data-lang="en"><p lang="en" dir="ltr"><a href="https://twitter.com/kinow">@kinow</a> you can also specify them as command-line arguments (no need for the upper case thing)<a href="https://t.co/zBKpgcXN1C">https://t.co/zBKpgcXN1C</a><br><br>or `-Drun.arguments`</p>&mdash; Stéphane Nicoll (@snicoll) <a href="https://twitter.com/snicoll/status/800965565120708608">November 22, 2016</a></blockquote>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script></description>
</item>

</channel>
</rss>
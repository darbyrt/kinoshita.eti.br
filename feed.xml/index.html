<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0"
    xmlns:atom="http://www.w3.org/2005/Atom"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:dc="http://purl.org/dc/elements/1.1/">
    <channel>
        <title>Bruno P. Kinoshita</title>
        <link>/</link>
        <atom:link href="/feed.xml" rel="self" type="application/rss+xml" />
        
        <description>Latest news from Bruno P. Kinoshita</description>
        
        <lastBuildDate>2018-09-04T23:42:33+12:00</lastBuildDate>
        <pubDate>2018-09-04T23:42:33+12:00</pubDate>
        <generator>PieCrust 3.2.0</generator>
        
        
        

        
        
        
        <item>
            <title>Cylc Scheduler Internals - Part 3</title>
            <link>/2018/08/18/cylc-scheduler-internals-part-3</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>python</category>
            
            <category>opensource</category>
            
            <pubDate>2018-08-18T18:27:37+12:00</pubDate>
            <guid>/2018/08/18/cylc-scheduler-internals-part-3</guid>
            <description>
            
            &lt;p&gt;This is part 2, in a series of posts about &lt;a href=&#34;https://cylc.github.io/cylc&#34;&gt;Cylc&lt;/a&gt;
internals. The &lt;a href=&#34;/2018/07/14/cylc-scheduler-internals-part-1&#34;&gt;part 1&lt;/a&gt;
had the beginning of the workflow. &lt;a href=&#34;/2018/07/27/cylc-scheduler-internals-part-2&#34;&gt;part 2&lt;/a&gt;
documented from the moment the method &lt;code&gt;configure()&lt;/code&gt; is called. This post will
continue right after the &lt;code&gt;continue()&lt;/code&gt; method returns, going on with the next method: &lt;code&gt;run()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NB: this is a post to remember things, not really expecting to give someone enough
information to be able to hack the Cylc Scheduler (though you can and would have fun!).&lt;/em&gt;&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;a href=&#34;/2018/08/18/cylc-scheduler-internals-part-3/cylc-scheduler_run.png&#34;&gt;
&lt;img style=&#34;display: inline; width: 100%;&#34; class=&#34;ui image&#34; src=&#34;/2018/08/18/cylc-scheduler-internals-part-3/cylc-scheduler_run.png&#34;  /&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;At this point, the Suite Server program must have been initialized, with the
objects that it requires, and with everything configured. So this method is the one
that starts the whole work on the tasks &amp;amp; proxies.&lt;/p&gt;
&lt;p&gt;The runahead points, i.e. what are the next available cycle points, are calculated
and scheduled. In the scheduling, tasks are queued for execution.&lt;/p&gt;
&lt;p&gt;Most of the interesting action takes place when &lt;code&gt;process_task_pool()&lt;/code&gt; is called,
and in the &lt;code&gt;submit_task_jobs()&lt;/code&gt;. The latter is a method from &lt;code&gt;TaskJobManager&lt;/code&gt;, and
it is here where - in this case - my shell command is executed through a temporary
shell script file.&lt;/p&gt;
&lt;p&gt;The graph was created from the initial execution of a suite that was starting from
scratch (they can also be reinitialized). If there are multiple tasks waiting,
or if a suite was restarted, the diagram would look considerably different.&lt;/p&gt;
&lt;p&gt;You can download the &lt;a href=&#34;/2018/08/18/cylc-scheduler-internals-part-3/cylc-scheduler_run-src.xml&#34;&gt;source file&lt;/a&gt; for the diagram used in this post, and edit it
with &lt;a href=&#34;https://draw.io&#34;&gt;draw.io&lt;/a&gt;.&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Use of Logging in Java Image Processing libraries</title>
            <link>/2018/08/12/use-of-logging-in-java-image-processing-libraries</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>apache software foundation</category>
            
            <category>java</category>
            
            <category>apache commons</category>
            
            <category>image processing</category>
            
            <category>opensource</category>
            
            <pubDate>2018-08-12T17:55:44+12:00</pubDate>
            <guid>/2018/08/12/use-of-logging-in-java-image-processing-libraries</guid>
            <description>
            
            &lt;p&gt;For &lt;a href=&#34;https://issues.apache.org/jira/browse/IMAGING-154&#34;&gt;IMAGING-154&lt;/a&gt; I was trying to think in a solution
for the &lt;a href=&#34;https://github.com/apache/commons-imaging/blob/d2ec76bd10f30c39ae5180ede1254908e76045f0/src/main/java/org/apache/commons/imaging/util/Debug.java&#34;&gt;existing &lt;code&gt;Debug&lt;/code&gt;&lt;/a&gt;
class. This class was the issue of discussion during a
&lt;a href=&#34;https://markmail.org/thread/ak3hcka7piykxixz#query:+page:1+mid:ppgxbhjx3opqlixj+state:results&#34;&gt;previous 1.0 release vote thread&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Initially I tried simply changing the class a bit, and make it configurable, so that we could keep it -
as there is a valid use case for having a class that collects information during the image processing
algorithms were applied.&lt;/p&gt;
&lt;p&gt;And for me, the next step would naturally be to remove the use of &lt;code&gt;System.out&lt;/code&gt;, as the &lt;code&gt;Debug&lt;/code&gt; class
would now have a &lt;code&gt;PrintStream&lt;/code&gt; that could be &lt;code&gt;System.out&lt;/code&gt; or something else.&lt;/p&gt;
&lt;p&gt;That&amp;#8217;s when I realized in the current version of Apache Commons Imaging (n&amp;eacute;e Sanselan) uses
&lt;code&gt;System.out&lt;/code&gt; when debugging, but also when it wants to enable a
&lt;a href=&#34;https://github.com/apache/commons-imaging/blob/d2ec76bd10f30c39ae5180ede1254908e76045f0/src/main/java/org/apache/commons/imaging/formats/gif/GifImageParser.java#L798&#34;&gt;&amp;ldquo;&lt;em&gt;verbose&lt;/em&gt;&amp;rdquo; mode&lt;/a&gt;
in some classes.&lt;/p&gt;
&lt;p&gt;I am using this post to collect a few cases, and check what other image processing images
are doing with regards to logging.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&#34;center&#34;&gt;&lt;strong&gt;Library&lt;/strong&gt;&lt;/th&gt;
&lt;th align=&#34;center&#34;&gt;&lt;strong&gt;Logger&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Java ImageIO&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No logging (exceptions only)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;im4java&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No logging (exceptions only)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;opencv JNI&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;No logging (exceptions only)&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;GeoSolutions ImageIO-Ext&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;java.util.logging&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Catalano&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;java.util.logging&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Apache PDFBox JBIG2&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Custom Logger&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;ImageJ2&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;SciJava Logger&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Fiji&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;SLF4J + logback&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;OpenJPEG&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;Custom Logger&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;imgscalar&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;System.out&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Apache Commons Imaging&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;System.out&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Sanselan&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;System.out&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Marvin&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;System.out&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&#34;center&#34;&gt;Processing&lt;/td&gt;
&lt;td align=&#34;center&#34;&gt;System.out&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>UUID's in Apache Jena</title>
            <link>/2018/08/11/uuids-in-apache-jena</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>apache software foundation</category>
            
            <category>java</category>
            
            <category>jena</category>
            
            <category>opensource</category>
            
            <pubDate>2018-08-11T19:02:16+12:00</pubDate>
            <guid>/2018/08/11/uuids-in-apache-jena</guid>
            <description>
            
            &lt;p&gt;In this post I won&amp;#8217;t talk about what are UUID&amp;#8217;s, or how they work in Java.
&lt;a href=&#34;https://www.baeldung.com/java-uuid&#34;&gt;Here&lt;/a&gt;&amp;#8216;s a great article on that. Or access the always reliable &lt;a href=&#34;https://en.wikipedia.org/wiki/Universally_unique_identifier&#34;&gt;Wikipedia article&lt;/a&gt;
about it. &lt;em&gt;(or if you would rather, read the &lt;a href=&#34;http://www.ietf.org/rfc/rfc4122.txt&#34;&gt;RFC 4122&lt;/a&gt;)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I found out that Jena had UUID implementations after writing a 
&lt;a href=&#34;/2018/05/29/what-happens-when-you-create-a-new-dataset-in-apache-jena-fuseki&#34;&gt;previous post&lt;/a&gt;.
And then decided to look into which UUID&amp;#8217;s Jena has, and where these UUID&amp;#8217;s
were used. This way I would either understand why Jena needed UUID&amp;#8217;s, or
just be more educated in case I ever stumbled with a change in Jena that
required related work.&lt;/p&gt;
&lt;h2&gt;Jena Core&amp;#8217;s &lt;em&gt;org.apache.jena.shared.uuid&lt;/em&gt;&lt;/h2&gt;
&lt;p&gt;This package is small and simply contains: &lt;em&gt;factories&lt;/em&gt;,&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.deviantart.com/kinow/art/Zatoichi-Crying-from-A-Tale-of-Zatoichi-758902187&#34;&gt;&lt;img style=&#34;float: right; height: 300px;&#34; class=&#34;ui image&#34; src=&#34;/2018/08/11/uuids-in-apache-jena/zatoichi_crying.png&#34; alt=&#34;Zatoichi Crying&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;UUIDFactory&lt;/code&gt;: interface for a factory of UUID&amp;#8217;s&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UUID_V1_Gen&lt;/code&gt;: a factory for &lt;code&gt;UUID_V1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UUID_V4_Gen&lt;/code&gt;: a factory for &lt;code&gt;UUID_V4&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;and &lt;em&gt;UUID implementations&lt;/em&gt;,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;JenaUUID&lt;/code&gt;: abstract base class for UUID implementations&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UUID_nil&lt;/code&gt;: a special UUID, &lt;em&gt;nil&lt;/em&gt;, filled with zeroes&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UUID_V1&lt;/code&gt;: UUID V1&lt;/li&gt;
&lt;li&gt;&lt;code&gt;UUID_V4&lt;/code&gt;: UUID V4&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;and a &lt;em&gt;utility class&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;LibUUID&lt;/code&gt;: with methods to create a &lt;code&gt;Random&lt;/code&gt; and to create &lt;code&gt;byte[]&lt;/code&gt; seeds.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;JenaUUID&lt;/code&gt; contains a method to return a &lt;code&gt;JenaUUID&lt;/code&gt; as a Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt;. And is used
in the command line utility &lt;code&gt;juuid&lt;/code&gt;, for transaction ID&amp;#8217;s, and when a new
dataset is created. For the new dataset, Fuseki will create files in a temporary
location. The name of the temporary location is created using an instance of
&lt;code&gt;JenaUUID&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;em&gt;UUID_V1&lt;/em&gt; and &lt;em&gt;UUID_V4&lt;/em&gt;&lt;/h3&gt;
&lt;p&gt;Jena&amp;#8217;s &lt;code&gt;UUID_V1&lt;/code&gt; is an implementation of Version 1 (&lt;em&gt;time based&lt;/em&gt;),
variant 2 (&lt;em&gt;DCE&lt;/em&gt;). Which means it uses MAC address and
timestamp to generate the universal unique ID&amp;#8217;s.&lt;/p&gt;
&lt;p&gt;It uses &lt;code&gt;NetworkInterface.getNetworkInterfaces()&lt;/code&gt; to retrieve the MAC
address of the node running Jena. When using localhost, the MAC
address is not available, so it resorts to using a random number.&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;And Jena&amp;#8217;s &lt;code&gt;UUID_V4&lt;/code&gt; is an implementation of Version 4(&lt;em&gt;random&lt;/em&gt;),
variant 2 (&lt;em&gt;DCE&lt;/em&gt;). Which means it uses random numbers to generate
the universal unique ID&amp;#8217;s.&lt;/p&gt;
&lt;p&gt;The factory for V4 will have a random for the most significant bits,
and for the least significant bits of the UUID (also including version
and variant). The random for the factory is created by &lt;code&gt;LibUUID#makeRandom()&lt;/code&gt;.
This method returns a &lt;code&gt;SecureRandom&lt;/code&gt; with two seeds, one being random, and
the other created with &lt;code&gt;LibUUID#makeSeed()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UUID_V4&lt;/code&gt; uses a &lt;code&gt;SecureRandom&lt;/code&gt; created locally but with the seed also set by
&lt;code&gt;LibUUID#makeSeed()&lt;/code&gt;. The seed returned by this method may use the
MAC address, but will also use the &lt;code&gt;os.version&lt;/code&gt;, &lt;code&gt;user.name&lt;/code&gt;, &lt;code&gt;java.version&lt;/code&gt;,
number of active threads, total memory, free memory, and the hash code
of a newly created &lt;code&gt;Object&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Transaction ID UUID (&lt;em&gt;TxnIdUuid&lt;/em&gt;) &amp;mdash; uses JenaUUID&lt;/h2&gt;
&lt;p&gt;Jena contains two implementations of &lt;code&gt;TxnId&lt;/code&gt; (transaction identifiers),&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;TxnIdSimple&lt;/code&gt;: transaction IDs are created with a counter within each JVM&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TxnIdUuid&lt;/code&gt;: transaction IDs are created using &lt;code&gt;JenaUUID&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first thing that called my eye in this class was the inconsistency with the
name - which is quite normal in large projects such as Jena.&lt;/p&gt;
&lt;p&gt;As &lt;code&gt;TxnIdUuid&lt;/code&gt; calls &lt;code&gt;JenaUUID#generate()&lt;/code&gt;, it will use the default factory,
&lt;code&gt;UUID_V1_Gen&lt;/code&gt;. Then it will call &lt;code&gt;asUUID&lt;/code&gt; to return a Java &lt;code&gt;UUID&lt;/code&gt; object but
with the same UUID.&lt;/p&gt;
&lt;h2&gt;Create a new dataset in Fuseki (&lt;em&gt;ActionDatasets&lt;/em&gt;) &amp;mdash; uses JenaUUID&lt;/h2&gt;
&lt;p&gt;When you create a new dataset in Fuseki, as explained in the
&lt;a href=&#34;/2018/05/29/what-happens-when-you-create-a-new-dataset-in-apache-jena-fuseki&#34;&gt;previous post&lt;/a&gt;,
Fuseki will create some temporary files and folders. For at least one folder, it will
use an instance of &lt;code&gt;JenaUUID&lt;/code&gt;, in &lt;code&gt;ActionDatasets#execPostContainer()&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Blank node IDs (&lt;em&gt;BlankNodeId&lt;/em&gt;) &amp;mdash; uses Java&amp;#8217;s UUID&lt;/h2&gt;
&lt;p&gt;Blank nodes in Jena need an identifier too. It is possible to configure Jena
to either return a JVM bound counter (similarly to how &lt;code&gt;TxnIdSimple&lt;/code&gt; works),
or otherwise blank nodes identifiers will be generated with
&lt;code&gt;java.util.UUID.randomUUID()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;I wonder why the transaction ID&amp;#8217;s use Jena&amp;#8217;s &lt;code&gt;JenaUUID&lt;/code&gt;s, but the blank
node IDs use Java&amp;#8217;s UUID&lt;/strong&gt;&lt;/em&gt;? They are &lt;a href=&#34;https://github.com/apache/jena/blob/7b011c30b6bf54db44b5b14408f103009adbdd67/jena-core/src/test/java/org/apache/jena/shared/uuid/TestUUID_JRE.java&#34;&gt;compatible&lt;/a&gt; anyway.&lt;/p&gt;
&lt;p&gt;Other methods related to blank nodes also use Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt;,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BlankNodeAllocatorFixedSeedHash&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BlankNodeAllocatorHash#freshSeed()&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;SPARQL functions, and &lt;em&gt;NodeFunctions&lt;/em&gt; &amp;mdash; uses Java&amp;#8217;s UUID&lt;/h2&gt;
&lt;p&gt;SPARQL 1.1 contains functions &lt;a href=&#34;https://www.w3.org/TR/sparql11-query/#func-uuid&#34;&gt;&lt;code&gt;UUID&lt;/code&gt;&lt;/a&gt; and
&lt;a href=&#34;https://www.w3.org/TR/sparql11-query/#func-struuid&#34;&gt;&lt;code&gt;STRUUID&lt;/code&gt;&lt;/a&gt;. Apache Jena provides
these two functions, and users can use them in queries such as&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;k&#34;&gt;SELECT&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UUID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uuid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StrUUID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;AS&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;strUuid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;WHERE&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(but before users would have to call extra functions in a different namespace).&lt;/p&gt;
&lt;p&gt;The function implementations use &lt;code&gt;NodeFunctions&lt;/code&gt; methods &lt;code&gt;struuid&lt;/code&gt; and &lt;code&gt;uuid&lt;/code&gt;. Both methods in
&lt;code&gt;NodeFunctions&lt;/code&gt; use Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt;, and not &lt;code&gt;JenaUUID&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Files and directories for databases / datasets &amp;mdash; uses Java&amp;#8217;s UUID&lt;/h2&gt;
&lt;p&gt;Files and directories created in Jena use Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt;,&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;BufferAllocatorMapped#getNewTemporaryFile()&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;TDBBuilder#create&lt;/code&gt; methods and &lt;code&gt;ComponentIdMgr&lt;/code&gt; constructor&lt;/li&gt;
&lt;li&gt;&lt;code&gt;AbstractDataBag#getNewTemporaryFile()&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;In Jena there are places where instances of &lt;code&gt;JenaUUID&lt;/code&gt; are used to produce a
UUID, and other places where Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt; is used.&lt;/p&gt;
&lt;p&gt;Java&amp;#8217;s &lt;code&gt;UUID&lt;/code&gt; provides a variant 2 version 4 (random DCE), which is equivalent to
&lt;code&gt;UUID_V4&lt;/code&gt;. But there is no equivalent of &lt;code&gt;UUID_V1&lt;/code&gt;, the default used in Jena.&lt;/p&gt;
&lt;p&gt;And even though &lt;code&gt;UUID_V4&lt;/code&gt; and &lt;code&gt;UUID&lt;/code&gt; are compatible, I believe Jena&amp;#8217;s version is using
a seed with so many JVM and operating system related settings (&lt;code&gt;os.version&lt;/code&gt;, free memory, etc)
in order to have a unique seed per node running Jena, independent of whether there
are multiple JVM&amp;#8217;s in the same node.&lt;/p&gt;
&lt;p&gt;But to be honest, I am still not sure which one I would have to use, nor if there are
cases where I should pick one over the other&amp;#8230;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;EDIT: Apache Jena&amp;#8217;s lead dev &lt;a href=&#34;https://markmail.org/thread/vnys264p4c6lkc6l#query:+page:1+mid:raa7gaxconcnqbzp+state:results&#34;&gt;replied&lt;/a&gt; with a bit of history about the project too (:&lt;/em&gt;&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Creating a Docker container to run as a command</title>
            <link>/2018/08/04/creating-a-docker-container-to-run-as-a-command</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>docker</category>
            
            <category>opensource</category>
            
            <pubDate>2018-08-04T22:00:36+12:00</pubDate>
            <guid>/2018/08/04/creating-a-docker-container-to-run-as-a-command</guid>
            <description>
            
            &lt;p&gt;For the past two weeks at work I have been assigned to work on PHP projects. Though I used
PHP some time ago - especially with Code Igniter and Laravel - I have not used it in a few
years. And have been doing mostly Java nowadays.&lt;/p&gt;
&lt;p&gt;The complete project setup was done by co-workers. I had a PHP project, using Symfony, several
bundles and libraries, and Postgres. But it required just running a few commands to set up
AWS settings, and then fire up Docker Compose.&lt;/p&gt;
&lt;p&gt;Besides Docker Compose starting a web container, and another Postgres container, we used the
web container to run &lt;a href=&#34;https://getcomposer.org/&#34;&gt;Composer&lt;/a&gt;. In the past, I would see the PHP
project mapped as a folder in the running container, and then composer would be executed
in the host.&lt;/p&gt;
&lt;p&gt;I noticed then that I could do the same to an image I created in 2016 to run
&lt;a href=&#34;https://cylc.github.io/cylc/&#34;&gt;Cylc&lt;/a&gt;. The &lt;a href=&#34;https://github.com/kinow/docker/blob/d1cc1771ac53b8efd37b5e4c4401b74ebd294a2b/cylc/Dockerfile&#34;&gt;previous version&lt;/a&gt;
would be used to start a container in a terminal, then run some commands
while maintaining the state within the container.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&#34;https://github.com/kinow/cylc-docker&#34;&gt;new version&lt;/a&gt;
now maps a volume to the version of cylc, installs the dependencies, and
then allows the state to be maintained solely in the mapped volume.&lt;/p&gt;
&lt;p&gt;Furthermore, the entrypoint of the image is the &lt;code&gt;cylc&lt;/code&gt; command. Which means that
you do not have to execute a terminal in order to run commands to the container
(or change the command/entrypoint).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;...
VOLUME &lt;span class=&#34;s2&#34;&gt;&amp;quot;/opt/cylc&amp;quot;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;/tmp&amp;quot;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;/run&amp;quot;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;quot;/var/run&amp;quot;&lt;/span&gt; &lt;span class=&#34;c&#34;&gt;# we have the state stored only in /opt/cylc&lt;/span&gt;
WORKDIR &lt;span class=&#34;s2&#34;&gt;&amp;quot;/opt/cylc&amp;quot;&lt;/span&gt;
ENV PATH /opt/cylc/bin:&lt;span class=&#34;nv&#34;&gt;$PATH&lt;/span&gt;
WORKDIR /opt/cylc
ENTRYPOINT &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;cylc&amp;quot;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;c&#34;&gt;# here&amp;#39;s the trick!&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;It uses the same approach from the PHP image I am using for Composer, with a few
additional improvements from the &lt;a href=&#34;https://docs.docker.com/develop/develop-images/dockerfile_best-practices/&#34;&gt;Best practices for writing Dockerfiles&lt;/a&gt; documentation.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;docker run -ti -v &lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt; -P&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;/cylc:/opt/cylc cylc validate /opt/cylc/etc/examples/tutorial/oneoff/basic/
Valid &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; cylc-7.7.2
&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;docker run -ti -v &lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt; -P&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;/cylc:/opt/cylc cylc register /opt/cylc/etc/examples/tutorial/oneoff/basic/
REGISTER /opt/cylc/etc/examples/tutorial/oneoff/basic/
&lt;span class=&#34;nv&#34;&gt;$ &lt;/span&gt;docker run -ti -v &lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;pwd&lt;/span&gt; -P&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;quot;&lt;/span&gt;/cylc:/opt/cylc cylc start --non-daemon --debug /opt/cylc/etc/examples/tutorial/oneoff/basic/
            ._.                                                       
            &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;                 The Cylc Suite Engine &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;7.7.2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;         
._____._. ._&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;_____.           Copyright &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 2008-2018 NIWA          
&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; .___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; .___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;  _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !_! &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !___.  This program comes with ABSOLUTELY NO WARRANTY&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
!_____!___. &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;_!_____!  see &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;cylc warranty&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;.  It is free software, you 
      .___! &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;           are welcome to redistribute it under certain  
      !_____!                conditions&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; see &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;cylc conditions&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;.       
2018-07-30T12:10:32Z INFO - Suite starting: &lt;span class=&#34;nv&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;3714d1a17999:43040 &lt;span class=&#34;nv&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1
2018-07-30T12:10:32Z INFO - Cylc version: 7.7.2
2018-07-30T12:10:32Z INFO - Run mode: live
2018-07-30T12:10:32Z INFO - Initial point: 1
2018-07-30T12:10:32Z INFO - Final point: 1
2018-07-30T12:10:32Z INFO - Cold Start 1
2018-07-30T12:10:32Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -released to the task pool
2018-07-30T12:10:32Z DEBUG - BEGIN TASK PROCESSING
2018-07-30T12:10:32Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -waiting &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; queued
2018-07-30T12:10:32Z DEBUG - &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; task&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; de-queued
2018-07-30T12:10:32Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -submit-num&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1, owner@host&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;localhost
2018-07-30T12:10:32Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -queued &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; ready
2018-07-30T12:10:32Z DEBUG - END TASK PROCESSING &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;took 0.00642895698547 seconds&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
2018-07-30T12:10:32Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cylc&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;jobs-submit&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;--debug&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;--&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;/opt/cylc/etc/examples/tutorial/oneoff/basic/log/job&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;1/hello/01&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;client-connect&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; root@3714d1a17999:cylc-message &lt;span class=&#34;nv&#34;&gt;privilege&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;full-control&amp;#39;&lt;/span&gt; 7b05596a-5971-4733-82de-28528f702ff0
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;client-command&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; put_messages root@3714d1a17999:cylc-message 7b05596a-5971-4733-82de-28528f702ff0
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit cmd&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; cylc &lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit --debug -- /opt/cylc/etc/examples/tutorial/oneoff/basic/log/job 1/hello/01
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit ret_code&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 0
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit out&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;TASK JOB SUMMARY&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;2018-07-30T12:10:32Z&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;1/hello/01&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;0&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;61
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;TASK JOB COMMAND&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;2018-07-30T12:10:32Z&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;1/hello/01&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;STDOUT&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 61
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;current:ready&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; submitted at 2018-07-30T12:10:32Z
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -job&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;01&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; submitted to localhost:background&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;61&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -ready &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; submitted
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -health check settings: submission &lt;span class=&#34;nv&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;None
2018-07-30T12:10:33Z DEBUG - BEGIN TASK PROCESSING
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; task&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; de-queued
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -forced spawning
2018-07-30T12:10:33Z DEBUG - END TASK PROCESSING &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;took 0.000992059707642 seconds&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;current:submitted&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&amp;gt; started at 2018-07-30T12:10:33Z
2018-07-30T12:10:33Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -submitted &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; running
2018-07-30T12:10:33Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -health check settings: execution &lt;span class=&#34;nv&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;None
2018-07-30T12:10:34Z DEBUG - BEGIN TASK PROCESSING
2018-07-30T12:10:34Z DEBUG - &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; task&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; de-queued
2018-07-30T12:10:34Z DEBUG - END TASK PROCESSING &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;took 0.000984191894531 seconds&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
2018-07-30T12:10:43Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;client-connect&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; root@3714d1a17999:cylc-message &lt;span class=&#34;nv&#34;&gt;privilege&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;full-control&amp;#39;&lt;/span&gt; 524d658e-9932-4135-9523-3c2ace3990cf
2018-07-30T12:10:43Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;client-command&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; put_messages root@3714d1a17999:cylc-message 524d658e-9932-4135-9523-3c2ace3990cf
2018-07-30T12:10:43Z INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;current:running&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&amp;gt; succeeded at 2018-07-30T12:10:43Z
2018-07-30T12:10:43Z DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -running &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; succeeded
2018-07-30T12:10:43Z INFO - Suite shutting down - AUTOMATIC
2018-07-30T12:10:44Z INFO - DONE
&lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;If you have a utility in your computer that requires a few dependencies, but that
can store the state/data in a mapped volume, the same kind of container may be
useful.&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Cylc Scheduler Internals - Part 2</title>
            <link>/2018/07/27/cylc-scheduler-internals-part-2</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>python</category>
            
            <category>opensource</category>
            
            <pubDate>2018-07-27T00:25:37+12:00</pubDate>
            <guid>/2018/07/27/cylc-scheduler-internals-part-2</guid>
            <description>
            
            &lt;p&gt;This is part 2, in a series of posts about &lt;a href=&#34;https://cylc.github.io/cylc&#34;&gt;Cylc&lt;/a&gt;
internals. The &lt;a href=&#34;/2018/07/14/cylc-scheduler-internals-part-1&#34;&gt;part 1&lt;/a&gt;
had the beginning of the workflow. And here we will have the continuation, from
the moment the method &lt;code&gt;configure()&lt;/code&gt; is called.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NB: this is a post to remember things, not really expecting to give someone enough
information to be able to hack the Cylc Scheduler (though you can and would have fun!).&lt;/em&gt;&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;a href=&#34;/2018/07/27/cylc-scheduler-internals-part-2/cylc-scheduler_configure.png&#34;&gt;
&lt;img style=&#34;display: inline; width: 100%;&#34; class=&#34;ui image&#34; src=&#34;/2018/07/27/cylc-scheduler-internals-part-2/cylc-scheduler_configure.png&#34;  /&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;The &lt;code&gt;configure&lt;/code&gt; method is responsible for configuring the Suite Server Program. Which
means it will interact with the configuration singletons to retrieve the necessary
configuration for the program.&lt;/p&gt;
&lt;p&gt;It also interacts with other objects that store state, and also creates basic data structures
and objects required for a suite program (e.g. Queues).&lt;/p&gt;
&lt;p&gt;This is also where the &lt;strong&gt;contact file&lt;/strong&gt; is created, as well as the HTTP server.&lt;/p&gt;
&lt;p&gt;You can download the &lt;a href=&#34;/2018/07/27/cylc-scheduler-internals-part-2/cylc-scheduler_configure-src.xml&#34;&gt;source file&lt;/a&gt; for the diagram used in this post, and edit it
with &lt;a href=&#34;https://draw.io&#34;&gt;draw.io&lt;/a&gt;.&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Multithreaded code and Pandas</title>
            <link>/2018/07/22/multithreaded-code-and-pandas</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>python</category>
            
            <category>pandas</category>
            
            <category>opensource</category>
            
            <pubDate>2018-07-22T13:22:14+12:00</pubDate>
            <guid>/2018/07/22/multithreaded-code-and-pandas</guid>
            <description>
            
            &lt;p&gt;&lt;a href=&#34;https://www.deviantart.com/kinow/art/Woman-looking-01-743551195&#34;&gt;&lt;img style=&#34;float: left; height: 300px;&#34; class=&#34;ui image&#34; src=&#34;/2018/07/22/multithreaded-code-and-pandas/woman-looking-01.png&#34; alt=&#34;Woman looking&#34; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Pandas provides high-performance data structures in Python. I think in Java there are
similar data structures in projects like Apache Commons Collections,
Google Guava, and also Trove.&lt;/p&gt;
&lt;p&gt;In the Java libraries thread-safety is always a must-have feature. Probably as it is quite
common for a Java program to have more than one thread, especially if the code runs in some
sort of web container.&lt;/p&gt;
&lt;p&gt;I recently learned that Pandas, on the other hand, does not guarantee any thread-safety.
I found that while reading an
&lt;a href=&#34;https://github.com/pandas-dev/pandas/issues/21150&#34;&gt;issue about race condition in the &lt;code&gt;IndexEngine&lt;/code&gt;&lt;/a&gt;,
and after preparing a pull request for that.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;kn&#34;&gt;from&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;concurrent.futures&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ThreadPoolExecutor&lt;/span&gt;
&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pandas&lt;/span&gt; &lt;span class=&#34;kn&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;pd&lt;/span&gt;

&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pd&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;date_range&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#39;2001&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#39;2020&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;k&#34;&gt;with&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;as&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;assert&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;p&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;lambda&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_unique&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;When you create an index like that, it will delegate most of the hard work to the &lt;code&gt;IndexEngine&lt;/code&gt;.
Inside the &lt;code&gt;IndexEngine&lt;/code&gt;, the values passed for the index are stored, and then an empty
&lt;code&gt;Hashtable&lt;/code&gt; is created (as well as several flags for the state of the object, such as
&lt;code&gt;unique&lt;/code&gt;, which defines whether the index has unique elements or not).&lt;/p&gt;
&lt;p&gt;Once a user calls a method like &lt;code&gt;is_unique&lt;/code&gt;, then the flags are updated, the &lt;code&gt;Hashtable&lt;/code&gt;
mapping is populated, and while doing so, if not all elements are unique, the flag for
&lt;code&gt;unique&lt;/code&gt; is set to &lt;code&gt;false&lt;/code&gt;, or &lt;code&gt;true&lt;/code&gt; otherwise. But if the user does not need that
operation, we will avoid populating the mapping until we really need it.&lt;/p&gt;
&lt;p&gt;I believe it is done that way for performance. However, at the cost that the state is shared
among calls, which makes it harder to use this API in a multithreaded environment - though
still possible by moving the synchronization to your caller code.&lt;/p&gt;
&lt;p&gt;Some Apache software also do the same, asking users to synchronize, serialize, or handle
certain corner cases on their side. There is a huge cost associated with maintaining an Open
Source project that promises thread-safety.&lt;/p&gt;
&lt;p&gt;But maybe &lt;a href=&#34;http://dask.pydata.org/en/latest/&#34;&gt;Dask&lt;/a&gt; provides an alternative to use Pandas
with multiple threads. But I have not used that yet.&lt;/p&gt;
&lt;p&gt;&amp;hearts; Open Source&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NB: even though Pandas is not thread-safe, it does not mean you should not use it. Just use
with care when using multiple threads&lt;/em&gt;&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>Cylc Scheduler Internals - Part 1</title>
            <link>/2018/07/14/cylc-scheduler-internals-part-1</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>python</category>
            
            <category>opensource</category>
            
            <pubDate>2018-07-14T22:42:47+12:00</pubDate>
            <guid>/2018/07/14/cylc-scheduler-internals-part-1</guid>
            <description>
            
            &lt;p&gt;This is the first post in a series of three (or maybe four later) based on diagrams
I collected while debugging the Cylc scheduler. The scheduler is called by the &lt;code&gt;cylc start&lt;/code&gt;
utility.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;NB: this is a post to remember things, not really expecting to give someone enough
information to be able to hack the Cylc Scheduler (though you can and would have fun!).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Instead of going at length on what happens (and there is quite a bit happening when
you run &lt;code&gt;cylc start my.suite&lt;/code&gt;), I will use the following diagram, followed by a few paragraphs
to highlight certain parts. The code used was based on &lt;a href=&#34;https://github.com/cylc/cylc/tree/7.7.1&#34;&gt;Cylc 7.7.1&lt;/a&gt;.&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;a href=&#34;/2018/07/14/cylc-scheduler-internals-part-1/cylc-scheduler_cli-workflow.png&#34;&gt;
&lt;img style=&#34;display: inline; width: 100%;&#34; class=&#34;ui image&#34; src=&#34;/2018/07/14/cylc-scheduler-internals-part-1/cylc-scheduler_cli-workflow.png&#34;  /&gt;
&lt;/a&gt;
&lt;/p&gt;

&lt;p&gt;When a Cylc command like &lt;code&gt;cylc start&lt;/code&gt; is invoked, it actually gets translated into
&lt;code&gt;bin/cylc-$command_name&lt;/code&gt;. &lt;code&gt;cylc-start&lt;/code&gt; is a Shell file, that will simply call &lt;code&gt;cylc-run&lt;/code&gt;.
&lt;code&gt;cylc-run&lt;/code&gt; then imports &lt;code&gt;scheduler_cli&lt;/code&gt;&amp;#8230; but what you need to know is that in the end
&lt;code&gt;scheduler_cli&lt;/code&gt; will create an instance of &lt;code&gt;Scheduler&lt;/code&gt; with the right constructor
arguments, and call its &lt;code&gt;start&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;After that point, you are at the left-most lifeline, on the &lt;code&gt;Scheduler&lt;/code&gt; constructor
(i.e. the &lt;strong&gt;init&lt;/strong&gt; method of the scheduler.py&amp;#8217;s Scheduler class).&lt;/p&gt;
&lt;p&gt;If you follow the method calls - which are hopefully easy to understand and follow -
you will find that the constructor merely creates a few objects, prepares the suite
information, and the suite database.&lt;/p&gt;
&lt;p&gt;Then the &lt;code&gt;start&lt;/code&gt; method kicks things off, interacting with previously created objects,
but also with some singletons for logging and configuration. Oh, that &lt;code&gt;Cylc&lt;/code&gt; banner
is also printed here (in case you would like to customize it as in SpringBoot).&lt;/p&gt;
&lt;p&gt;After that, if you are running the suite as daemon, it will be
&lt;a href=&#34;http://code.activestate.com/recipes/66012-fork-a-daemon-process-on-unix/&#34;&gt;daemonized&lt;/a&gt;,
by forking the current process, but with Python.&lt;/p&gt;
&lt;p&gt;One important step that happens here, is the initialization of the HTTP Server. This server
will be used to communicate with the &lt;strong&gt;Suite Server Program&lt;/strong&gt;. It will be listening to
connections with the right endpoints available only after the &lt;code&gt;configure&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;Lastly, we have &lt;code&gt;configure&lt;/code&gt; and &lt;code&gt;run&lt;/code&gt; methods, which are two very important methods to be discussed
in the next part of this series, as they are quite extensive, and deserve their own diagrams.&lt;/p&gt;
&lt;p&gt;You can download the &lt;a href=&#34;/2018/07/14/cylc-scheduler-internals-part-1/cylc-scheduler_cli-workflow-src.xml&#34;&gt;source file&lt;/a&gt; for the diagram used in this post, and edit it
with &lt;a href=&#34;https://draw.io&#34;&gt;draw.io&lt;/a&gt;.&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>ImportError when debugging cylc in Eclipse</title>
            <link>/2018/07/10/import-error-when-debugging-cylc-in-eclipse</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>python</category>
            
            <category>opensource</category>
            
            <pubDate>2018-07-10T00:47:13+12:00</pubDate>
            <guid>/2018/07/10/import-error-when-debugging-cylc-in-eclipse</guid>
            <description>
            
            &lt;p&gt;Since I started reading cylc&amp;#8217;s source code in Eclipse to create some
sequence diagrams, I have not been able to debug it properly without
hitting errors in some part of the program execution.&lt;/p&gt;
&lt;p&gt;The error message was &lt;strong&gt;&lt;em&gt;&amp;ldquo;ImportError: cannot import name _remove_dead_weakref&amp;rdquo;&lt;/em&gt;&lt;/strong&gt;,
which was a bit enigmatic as I never heard about that function, but it seemed to be
something internal, or at least not from the project code base. And searching the Internet
did not help much.&lt;/p&gt;
&lt;p&gt;Here is the complete console output in Eclipse.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;pydev debugger: starting &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;pid: 15124&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
timeout &lt;span class=&#34;m&#34;&gt;10&lt;/span&gt; ps -opid,args &lt;span class=&#34;m&#34;&gt;13640&lt;/span&gt;  &lt;span class=&#34;c&#34;&gt;# return 1&lt;/span&gt;

            ._.                                                       
            &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;            The Cylc Suite Engine &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;7.7.1-37-g09c8a&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;    
._____._. ._&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;_____.           Copyright &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;C&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; 2008-2018 NIWA          
&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; .___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; .___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;  _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !___&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !_! &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; !___.  This program comes with ABSOLUTELY NO WARRANTY&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
!_____!___. &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;_!_____!  see &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;cylc warranty&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;.  It is free software, you 
      .___! &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;           are welcome to redistribute it under certain  
      !_____!                conditions&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; see &lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;cylc conditions&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt;.       
2018-07-10T01:00:47+12 INFO - Suite starting: &lt;span class=&#34;nv&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;localhost:44444 &lt;span class=&#34;nv&#34;&gt;pid&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;15124
2018-07-10T01:00:47+12 INFO - Cylc version: 7.7.1-37-g09c8a
2018-07-10T01:00:47+12 INFO - Run mode: live
2018-07-10T01:00:47+12 INFO - Initial point: 1
2018-07-10T01:00:47+12 INFO - Final point: None
2018-07-10T01:00:47+12 INFO - Cold Start 1
2018-07-10T01:00:47+12 DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -released to the task pool
2018-07-10T01:00:47+12 DEBUG - BEGIN TASK PROCESSING
2018-07-10T01:00:47+12 DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -waiting &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; queued
2018-07-10T01:00:47+12 DEBUG - &lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; task&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; de-queued
2018-07-10T01:00:47+12 INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -submit-num&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;1, owner@host&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;localhost
2018-07-10T01:00:47+12 DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -queued &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; ready
2018-07-10T01:00:47+12 DEBUG - END TASK PROCESSING &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;took 0.023609161377 seconds&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
2018-07-10T01:00:48+12 DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;cylc&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;jobs-submit&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;--debug&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;--&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;/home/kinow/Development/python/workspace/example-suite/log/job&amp;#39;&lt;/span&gt;, &lt;span class=&#34;s1&#34;&gt;&amp;#39;1/hello/01&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
2018-07-10T01:00:48+12 ERROR - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit cmd&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; cylc &lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit --debug -- /home/kinow/Development/python/workspace/example-suite/log/job 1/hello/01
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit ret_code&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 1
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit err&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
    Traceback &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;most recent call last&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;:
      File &lt;span class=&#34;s2&#34;&gt;&amp;quot;/home/kinow/Development/python/workspace/cylc/bin/cylc-jobs-submit&amp;quot;&lt;/span&gt;, line 52, in &amp;lt;module&amp;gt;
        from cylc.batch_sys_manager import BatchSysManager
      File &lt;span class=&#34;s2&#34;&gt;&amp;quot;/home/kinow/Development/python/workspace/cylc/lib/cylc/batch_sys_manager.py&amp;quot;&lt;/span&gt;, line 114, in &amp;lt;module&amp;gt;
        from cylc.task_message import &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
      File &lt;span class=&#34;s2&#34;&gt;&amp;quot;/home/kinow/Development/python/workspace/cylc/lib/cylc/task_message.py&amp;quot;&lt;/span&gt;, line 26, in &amp;lt;module&amp;gt;
        from logging import getLevelName, WARNING, ERROR, CRITICAL
      File &lt;span class=&#34;s2&#34;&gt;&amp;quot;/home/kinow/Development/python/anaconda2/lib/python2.7/logging/__init__.py&amp;quot;&lt;/span&gt;, line 26, in &amp;lt;module&amp;gt;
        import sys, os, &lt;span class=&#34;nb&#34;&gt;time&lt;/span&gt;, cStringIO, traceback, warnings, weakref, collections
      File &lt;span class=&#34;s2&#34;&gt;&amp;quot;/home/kinow/Development/python/anaconda2/lib/python2.7/weakref.py&amp;quot;&lt;/span&gt;, line 14, in &amp;lt;module&amp;gt;
        from _weakref import &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;
    ImportError: cannot import name _remove_dead_weakref
2018-07-10T01:00:48+12 ERROR - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit cmd&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; cylc &lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit --debug -- /home/kinow/Development/python/workspace/example-suite/log/job 1/hello/01
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit ret_code&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 1
    &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;jobs&lt;/span&gt;-submit out&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; 2018-07-10T01:00:48+12&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;1/hello/01&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;1
2018-07-10T01:00:48+12 INFO - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;current:ready&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; submission failed at 2018-07-10T01:00:48+12
2018-07-10T01:00:48+12 ERROR - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -submission failed
2018-07-10T01:00:48+12 DEBUG - &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;hello.1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; -ready &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; submit-failed
2018-07-10T01:00:48+12 DEBUG - BEGIN TASK PROCESSING
2018-07-10T01:00:48+12 DEBUG - &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; task&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; de-queued
2018-07-10T01:00:48+12 DEBUG - END TASK PROCESSING &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;took 0.00175499916077 seconds&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
2018-07-10T01:00:49+12 WARNING - suite stalled
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As the current diagram I am working on has quite a few &lt;code&gt;if&lt;/code&gt;&amp;#8216;s and &lt;code&gt;else&lt;/code&gt;&amp;#8216;s, I decided
to investigate why this error was occurring. Then, after some elimination I found that
it was due to the missing Anaconda 2 entry in my &lt;code&gt;$PATH&lt;/code&gt; environment variable.&lt;/p&gt;
&lt;p&gt;I had this variable configured in a custom script I load whenever I decide to use
Anaconda 2. And reproducing the same behaviour in Eclipse was easy.&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;img style=&#34;display: inline&#34; class=&#34;ui image&#34; src=&#34;/2018/07/10/import-error-when-debugging-cylc-in-eclipse/screenshot1.png&#34; alt=&#34;A screen shot of Eclipse with source code&#34; title=&#34;Locating the bug&#34; /&gt;
&lt;br/&gt;
&lt;small&gt;Locating the bug&lt;/small&gt;
&lt;/p&gt;

&lt;p&gt;Et voil&amp;agrave;! Eclipse was happily debugging again!&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;img style=&#34;display: inline&#34; class=&#34;ui image&#34; src=&#34;/2018/07/10/import-error-when-debugging-cylc-in-eclipse/screenshot2.png&#34; alt=&#34;A screen shot of Eclipse with source code&#34; title=&#34;Locating the bug&#34; /&gt;
&lt;br/&gt;
&lt;small&gt;Locating the bug&lt;/small&gt;
&lt;/p&gt;

&lt;p&gt;So if you have a similar problem, try comparing your environment variables and check if you
have some entries missing, and try adding them in Eclipse Debug configuration.&lt;/p&gt;
&lt;p&gt;Happy cycling!&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>A simple cylc suite</title>
            <link>/2018/07/08/a-simple-cylc-suite</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>cylc</category>
            
            <category>python</category>
            
            <category>opensource</category>
            
            <pubDate>2018-07-08T18:59:13+12:00</pubDate>
            <guid>/2018/07/08/a-simple-cylc-suite</guid>
            <description>
            
            &lt;p&gt;I have been writing more suites for &lt;a href=&#34;https://cylc.github.io/cylc/&#34;&gt;cylc&lt;/a&gt; lately, and found
an example that has proved to be useful for debugging certain parts of the code.&lt;/p&gt;
&lt;p&gt;It is an extremely simple suite, similar to what is in cylc&amp;#8217;s documentation. It
sleeps for N seconds, and prints a message.&lt;/p&gt;
&lt;p&gt;What makes it extra simpler, is that it cycles through integers, and has
a limit of 1 maximum active points.&lt;/p&gt;
&lt;p&gt;It is essentially the same as running the command in your shell session. With
the difference that it will run through all cylc&amp;#8217;s internal, only once, and
allow you to debug and diagnostic parts nor related to cycling and graphs
(as for these parts you would probably need a more elaborate example).&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;scheduling&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;cycling&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mode&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;integer&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;initial&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cycle&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;point&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;nb&#34;&gt;max&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;active&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;cycle&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;points&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dependencies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
        &lt;span class=&#34;p&#34;&gt;[[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;P1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]]&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;graph&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;hello&amp;quot;&lt;/span&gt;
&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;runtime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]]&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;script&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;quot;sleep 10; echo PING&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;I also combine this suite with the following &lt;code&gt;global.rc&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;terminal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;vim&lt;/span&gt; 
    &lt;span class=&#34;n&#34;&gt;gui&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;gvim&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;

&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;communication&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;base&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;44444&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;method&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;maximum&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;number&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;of&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ports&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;With &amp;#8220;base port&amp;#8221; set to 44444, and the maximum number of ports to 1, I will
be able to run only one task. But that way I can configure Wireshark and other
tools to default to 44444/HTTP, for ease of debugging.&lt;/p&gt;
&lt;p&gt;Then initialize the suite with something like: &lt;code&gt;cylc start --non-daemon --debug /home/kinow/Development/python/workspace/example-suite/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Happy cycling!&lt;/p&gt;
            
            </description>
        </item>
        
        
        
        <item>
            <title>What happens when you create a new dataset in Apache Jena Fuseki</title>
            <link>/2018/05/29/what-happens-when-you-create-a-new-dataset-in-apache-jena-fuseki</link>
            
            <author>kinow</author>
            <dc:creator>kinow</dc:creator>
            
            
            
            <category>jena</category>
            
            <category>apache software foundation</category>
            
            <category>java</category>
            
            <category>sparql</category>
            
            <category>opensource</category>
            
            <pubDate>2018-05-29T18:59:04+12:00</pubDate>
            <guid>/2018/05/29/what-happens-when-you-create-a-new-dataset-in-apache-jena-fuseki</guid>
            <description>
            
            &lt;p&gt;&lt;a href=&#34;/2018/05/27/what-happens-when-you-upload-a-turtle-file-in-apache-jena-fuseki&#34;&gt;Last post&lt;/a&gt;
was about what happens when you upload a Turtle file to Apache Jena Fuseki. And now today&amp;#8217;s post will be about
what happens when you create a new dataset in Apache Jena Fuseki.&lt;/p&gt;
&lt;p&gt;In theory, that happens before you upload a Turtle file, but this post series won&amp;#8217;t follow a logical order.
It will be more based on what I find interesting.&lt;/p&gt;
&lt;p&gt;Oh, the dataset created is &lt;strong&gt;an in-memory dataset&lt;/strong&gt;. Here&amp;#8217;s a simplified sequence diagram. Again,
these articles are more brain-dumps, used by myself for later reference.&lt;/p&gt;
&lt;p style=&#39;text-align: center;&#39;&gt;
&lt;img style=&#34;display: inline; width: 100%;&#34; class=&#34;ui image&#34; src=&#34;/2018/05/29/what-happens-when-you-create-a-new-dataset-in-apache-jena-fuseki/sequence-diagram.png&#34;  /&gt;
&lt;/p&gt;

&lt;h2&gt;ActionDatasets#execPostContainer() (Fuseki Core)&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ActionDatasets&lt;/code&gt;, as per the name, handles HTTP requests related to datasets. Such as when you
create a new dataset. It is also an HTTP action. The concept in Jena, as far as I could tell,
is similar to Jenkins&amp;#8217; actions, but simpler, without the UI/Jelly/Groovy part.&lt;/p&gt;
&lt;p&gt;This class also has a few static fields, which hold system information. One variable is actually
called &lt;code&gt;system&lt;/code&gt;. (wonder how well it works if you try to deploy Jena Fuseki with multiple JVM&amp;#8217;s
&lt;a href=&#34;https://markmail.org/message/xpfcgccuwgycdopw&#34;&gt;&lt;sup&gt;1&lt;/sup&gt;&lt;/a&gt; &lt;a href=&#34;https://afs.github.io/rdf-delta/ha-fuseki.html&#34;&gt;&lt;sup&gt;2&lt;/sup&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Its first task is to create an &lt;em&gt;UUID&lt;/em&gt;, using &lt;code&gt;JenaUUID&lt;/code&gt; (from Jena Core). This class looks
very interesting, &lt;a href=&#34;/2018/08/11/uuids-in-apache-jena&#34;&gt;wonder how it works&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then it creates a &lt;code&gt;DatasetDescriptionRegistry&lt;/code&gt;, which is a registry to keep track
of the datasets created. There is also some validation of parameters and state check, and then
the transaction is started (&lt;code&gt;system.begin()&lt;/code&gt;).&lt;/p&gt;
&lt;h2&gt;Model / (Core)&lt;/h2&gt;
&lt;p&gt;I used &lt;code&gt;Model&lt;/code&gt; and &lt;code&gt;ModelFactory&lt;/code&gt; before when working with ontologies and Prot&amp;eacute;g&amp;eacute;.
&lt;code&gt;ActionDatasets&lt;/code&gt; will create a &lt;code&gt;Model&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;    An RDF Model.

    An RDF model is a set of Statements.  Methods are provided for creating
    resources, properties and literals and the Statements which link them,
    for adding statements to and removing them from a model, for
    querying a model and set operations for combining models.
&lt;/blockquote&gt;

&lt;p&gt;It also gets a &lt;code&gt;StreamRDF&lt;/code&gt; from the model (i.e. &lt;code&gt;model.getGraph()&lt;/code&gt;), which will be used
later by the &lt;code&gt;RDFParser&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;ActionDatasets#assemblerFromForm() (Fuseki)&lt;/h2&gt;
&lt;p&gt;In &lt;code&gt;#assemblerFromForm()&lt;/code&gt;, it will create a template, and then use
&lt;code&gt;RDFParser&lt;/code&gt; to parse the template and load into &lt;code&gt;SteamRFF&lt;/code&gt;. The template looks like this:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;c&#34;&gt;# Licensed under the terms of http://www.apache.org/licenses/LICENSE-2.0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;@prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;http://jena.apache.org/fuseki#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;rdf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;http://www.w3.org/1999/02/22-rdf-syntax-ns#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;rdfs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;http://www.w3.org/2000/01/rdf-schema#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;tdb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;http://jena.hpl.hp.com/2008/tdb#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;err&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;ja&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;http://jena.hpl.hp.com/2005/11/Assembler#&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;c&#34;&gt;## ---------------------------------------------------------------&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;## Updatable in-memory dataset.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;nl&#34;&gt;&amp;lt;#service1&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;rdf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# URI of the dataset -- http://host:port/aaa&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;aaa&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceQuery&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;sparql&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceQuery&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceUpdate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;update&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceUpload&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;upload&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceReadWriteGraphStore&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;data&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceReadGraphStore&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;quot;get&amp;quot;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;fuseki&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dataset&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                     &lt;/span&gt;&lt;span class=&#34;nl&#34;&gt;&amp;lt;#dataset&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;

&lt;span class=&#34;c&#34;&gt;# Transactional, in-memory dataset. Initially empty.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;span class=&#34;nl&#34;&gt;&amp;lt;#dataset&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;rdf&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;ja&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;DatasetTxnMem&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;Persisting the dataset&lt;/h2&gt;
&lt;p&gt;Jena Fuseki will create a local copy of the template, using RIOT&amp;#8217;s &lt;code&gt;RDFDataMgr&lt;/code&gt;. For my environment, running from
Eclipse, the file location was &lt;em&gt;/home/kinow/Development/java/jena/jena/jena-fuseki2/jena-fuseki-core/run/system_files/902154aa-2bb6-11b2-8053-024232e7b374&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Fuseki now will look for exactly one Service Name statement (http://jena.apache.org/fuseki#name). The
name will be validated for things like blank space, empty, &amp;#8216;/&amp;#8217;, etc.&lt;/p&gt;
&lt;p&gt;Once the validation passes, then it will persist the file in somewhere like
/home/kinow/Development/java/jena/jena/jena-fuseki2/jena-fuseki-core/run/configuration/aaa.ttl. But
not without checking first it the file existed.&lt;/p&gt;
&lt;p&gt;As this is a brand new file, the &lt;code&gt;Model&lt;/code&gt; instance will be written on the file now.&lt;/p&gt;
&lt;h2&gt;DatasetAccessPoint (ARQ)&lt;/h2&gt;
&lt;p&gt;Funny, when I wrote it I immediately put this class under Fuseki Core, but it is actually
in ARQ. &lt;strong&gt;Why not in Fuseki?&lt;/strong&gt;. Looks like ARQ has a Web layer too.&lt;/p&gt;
&lt;p&gt;Fuseki&amp;#8217;s &lt;code&gt;FusekiBuilder#buildDataAccessPoint()&lt;/code&gt; creates the &lt;code&gt;DataAccessPoint&lt;/code&gt;. The &lt;code&gt;DataAccessPoint&lt;/code&gt;&amp;#8216;s
Javadocs say: &amp;ldquo;A name in the URL space of the server&amp;rdquo;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;DataService&lt;/code&gt; contains operations, and endpoints&lt;/li&gt;
&lt;li&gt;Services are added to endpoints, such as an endpoint for the &lt;code&gt;Quads_RW&lt;/code&gt;, the &lt;code&gt;REST_Quads_RW&lt;/code&gt; from previous post&lt;/li&gt;
&lt;li&gt;The name and the data service are used to create the &lt;code&gt;DataAccessPoint&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The current &lt;code&gt;HttpAction&lt;/code&gt; in the request contains a reference to Fuseki&amp;#8217;s
&lt;code&gt;DataAccessPointRegistry&lt;/code&gt;. Fuseki&amp;#8217;s &lt;code&gt;DataAccessPointRegistry&lt;/code&gt; extends Atlas&amp;#8217;
&lt;code&gt;Registry&lt;/code&gt;, which uses a &lt;code&gt;ConcurrentHashMap&lt;/code&gt; (again, how does it work with multiple JVM&amp;#8217;s?).&lt;/p&gt;
&lt;p&gt;The new &lt;code&gt;DataAccessPoint&lt;/code&gt; is registered with Fuseki&amp;#8217;s registry (not the other registry).&lt;/p&gt;
&lt;p&gt;And then, finally, the transaction is committed, the response is prepared (a 200 OK in &lt;code&gt;text/plain&lt;/code&gt;).
And a &lt;code&gt;null&lt;/code&gt; is returned, which means empty response.&lt;/p&gt;
&lt;p&gt;And here&amp;#8217;s some of the logs produced during this experiment.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:43&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config     INFO  Load configuration: file:///home/kinow/Development/java/jena/jena/jena-fuseki2/jena-fuseki-core/run/configuration/ds2.ttl
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:43&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config     INFO  Load configuration: file:///home/kinow/Development/java/jena/jena/jena-fuseki2/jena-fuseki-core/run/configuration/p1.ttl
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:43&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config     INFO  Register: /ds2
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:43&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Config     INFO  Register: /p1
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:43&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Server     INFO  Started 2018/05/28 21:11:43 NZST on port 3030
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:52&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; GET http://localhost:3030/&lt;span class=&#34;nv&#34;&gt;$/&lt;/span&gt;server
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:11:52&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;11&lt;/span&gt; ms&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:12:41&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; GET http://localhost:3030/&lt;span class=&#34;nv&#34;&gt;$/&lt;/span&gt;server
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:12:41&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; ms&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:22:33&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;3&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; POST http://localhost:3030/&lt;span class=&#34;nv&#34;&gt;$/&lt;/span&gt;datasets
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 21:46:25&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;3&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Create database : &lt;span class=&#34;nv&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; /aaa
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 22:16:17&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;3&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;3,224.390 s&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 22:16:18&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;4&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; GET http://localhost:3030/&lt;span class=&#34;nv&#34;&gt;$/&lt;/span&gt;server
&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-05-28 22:16:18&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; Admin      INFO  &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;4&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8&lt;/span&gt; ms&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;So that&amp;#8217;s that.&lt;/p&gt;
&lt;p&gt;Happy hacking !&lt;/p&gt;
            
            </description>
        </item>
        

    </channel>
</rss>